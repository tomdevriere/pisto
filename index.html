<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Pisto — Tous tes abonnements à 2 €</title>
<style>
  :root{
    --bg:#0d1016; --panel:#141924; --panel-2:#0f141d;
    --text:#e9edf5; --muted:#a9b2c3; --stroke:rgba(255,255,255,.08);
    --orange:#ff7a1a; --orange-2:#ff9b39; --radius:28px; --success:#22c55e;
  }
  *{box-sizing:border-box}
  body{margin:0;background:var(--bg);color:var(--text);
    font-family:-apple-system,BlinkMacSystemFont,"SF Pro Text","SF Pro Display",Inter,system-ui,sans-serif}
  .wrap{max-width:1200px;margin:0 auto;padding:24px}

  /* Header */
  header{position:sticky;top:0;z-index:40;backdrop-filter:saturate(140%) blur(10px);
    background:linear-gradient(180deg,rgba(13,16,22,.9),rgba(13,16,22,.6));border-bottom:1px solid var(--stroke)}
  .nav{display:flex;align-items:center;justify-content:space-between}
  .brand{display:none}
  .btn{cursor:pointer;-webkit-appearance:none;appearance:none;border:none;outline:none;
    border-radius:14px;padding:12px 16px;font-weight:600;letter-spacing:.2px;color:var(--text);
    background:rgba(255,255,255,.06);border:1px solid var(--stroke);
    transition:all .25s ease, transform .08s ease; text-decoration:none}
  .btn:hover{background:rgba(255,255,255,.1)} .btn:active{transform:translateY(1px)}
  .btn.ghost{background:transparent;border:1px solid var(--stroke)}
  .btn.ghost:hover{background:rgba(255,255,255,.07)}
  .btn.primary{background:linear-gradient(180deg,var(--orange),var(--orange-2));border:0;color:#0b0c0f;
    box-shadow:0 12px 38px rgba(255,122,26,.35)}
  .btn.primary:hover{filter:saturate(105%);box-shadow:0 16px 44px rgba(255,122,26,.42)}
  .btn.disabled,.btn:disabled{opacity:.5;cursor:not-allowed;pointer-events:none;background:rgba(255,255,255,.06);
    color:var(--muted);border:1px solid var(--stroke);box-shadow:none}
  .btn.icon{padding:8px 10px;border-radius:12px;width:38px;height:38px;display:inline-grid;place-items:center;font-size:18px}
  .btn.icon span{line-height:1;transform:translateY(-1px)}

  /* Hero */
  .hero{padding:28px 0 22px;text-align:center}
  .hero .logo-xl{width:220px;height:auto;margin:0 auto 12px;display:block}
  .hero h1{font-size:clamp(36px,6vw,64px);margin:6px 0 8px;font-weight:800}
  .hero h1 .neon{color:var(--orange);text-shadow:0 0 12px rgba(255,122,26,.7),0 0 32px rgba(255,122,26,.35)}
  .hero p{color:var(--muted)}

  /* Marquee logos */
  .marquee-shell{overflow:hidden;margin:20px 0;mask-image:linear-gradient(90deg,transparent,#000 6%,#000 94%,transparent)}
  .marquee{display:flex;gap:24px;animation:scroll 24s linear infinite}
  .pill{flex:0 0 auto;display:flex;align-items:center;justify-content:center;background:var(--panel-2);
    border-radius:18px;padding:12px 18px;border:1px solid var(--stroke)}
  .pill img{width:40px;height:40px;object-fit:contain}
  @keyframes scroll{from{transform:translateX(0)}to{transform:translateX(-50%)}}

  /* Searchbar */
  .searchbar{max-width:720px;margin:12px auto 0;position:relative}
  .searchbar input{width:100%;border-radius:16px;background:var(--panel-2);border:1px solid var(--stroke);
    padding:14px 46px;color:var(--text);outline:none}
  .searchbar .icon{position:absolute;left:16px;top:50%;transform:translateY(-50%);opacity:.7}
  .searchbar .kbd{position:absolute;right:12px;top:50%;transform:translateY(-50%);opacity:.5;font-size:12px;
    border:1px solid var(--stroke);border-radius:8px;padding:4px 6px}

  /* Sections / Grid */
  .section{padding:8px 0 64px}
  .grid{display:grid;grid-template-columns:repeat(3,1fr);gap:22px}
  @media(max-width:1024px){.grid{grid-template-columns:repeat(2,1fr)}}
  @media(max-width:640px){
    .wrap{padding:18px}
    header .nav{justify-content:center;gap:8px}
    .btn{padding:10px 12px}
    .hero{padding:16px 0 14px}
    .hero .logo-xl{width:168px;margin-bottom:8px}
    .hero h1{margin:4px 0 6px}
    .marquee-shell,.searchbar{max-width:100%;margin-left:auto;margin-right:auto}
    .grid{grid-template-columns:repeat(2,minmax(0,1fr));gap:12px;justify-items:center}
    .tile{width:100%;padding:16px}
    .tile .logo{width:76px;height:76px}
  }
  @media(max-width:360px){.grid{grid-template-columns:1fr}}

  .tile{position:relative;border-radius:var(--radius);background:var(--panel-2);border:1px solid var(--stroke);
    padding:22px;text-align:center;display:flex;flex-direction:column;align-items:center}
  .tile .logo{width:90px;height:90px;margin:0 auto 10px;border-radius:20px;background:var(--panel);
    display:flex;align-items:center;justify-content:center}
  .tile .logo img{width:100%;height:100%;object-fit:contain}
  .tile h3{margin:6px 0 6px;font-size:20px}
  .tile p{color:var(--muted);font-size:14px;min-height:38px}

  /* Prix aligné proprement */
  .price{
    display:flex;
    justify-content:center;
    gap:12px;
    margin-top:10px;
    margin-bottom:28px;
    align-items: baseline;   /* aligne « 2 € » sur la ligne du prix barré */
  }
  .was{ text-decoration:line-through; color:var(--muted); line-height:1 }
  .now{
    font-weight:800;
    background:linear-gradient(180deg,var(--orange),var(--orange-2));
    color:#0b0c0f;
    padding:4px 12px;        /* badge plus fin */
    border-radius:999px;
    line-height:1;
    display:inline-flex;
    align-items:center;
    position:relative;
    top:-6px;                /* remonte légèrement pour parfaite baseline */
  }

  .cta-row{display:flex;justify-content:center;gap:8px;margin-top:auto}

  /* Ribbons */
  .ribbon{position:absolute;top:14px;left:-10px;background:linear-gradient(180deg,var(--orange),var(--orange-2));
    color:#0b0c0f;font-weight:800;padding:6px 12px;border-radius:14px;box-shadow:0 10px 28px rgba(255,122,26,.35)}
  .ribbon.danger{background:linear-gradient(180deg,#ff6b6b,#ff3d3d);color:#080a0f}

  /* Router pages */
  .page{display:none}.page.active{display:block}

  /* Product page */
  .product{display:grid;grid-template-columns:1.2fr .8fr;gap:24px}
  @media(max-width:980px){.product{grid-template-columns:1fr}}
  .card{background:var(--panel-2);border:1px solid var(--stroke);border-radius:var(--radius);padding:24px}
  .prod-head{display:flex;align-items:center;gap:16px;margin-bottom:8px}
  .prod-head .logo{width:96px;height:96px;border-radius:24px;background:var(--panel);
    display:flex;align-items:center;justify-content:center;border:1px solid var(--stroke)}
  .prod-head img{width:100%;height:100%;object-fit:contain}
  .features{display:grid;gap:10px;margin:14px 0}

  /* Avis (défilement horizontal) */
  .reviews{overflow:hidden}
  .reviews-track{display:flex;gap:16px;animation:rev 32s linear infinite}
  .review{flex:0 0 320px;background:var(--panel);border:1px solid var(--stroke);border-radius:18px;padding:14px}
  .stars{color:#ffb300;letter-spacing:1px;margin-bottom:6px}
  @keyframes rev{from{transform:translateX(0)}to{transform:translateX(-50%)}}

  /* Cart */
  .cart-items{display:flex;flex-direction:column;gap:12px}
  .line{display:flex;align-items:center;justify-content:space-between;gap:12px;background:var(--panel);
    border:1px solid var(--stroke);border-radius:18px;padding:12px 14px}
  .x{width:26px;height:26px;border-radius:999px;background:rgba(255,255,255,.06);
    border:1px solid var(--stroke);display:grid;place-items:center;cursor:pointer}
  .checkout-row{display:flex;gap:10px;margin-top:16px;align-items:center;flex-wrap:wrap}
  .sum{background:var(--panel);border:1px solid var(--stroke);border-radius:999px;padding:10px 14px}
  .badge{border:1px solid var(--stroke);border-radius:999px;padding:8px 12px;opacity:.85}
  .badge.success{border-color:rgba(34,197,94,.25); background:rgba(34,197,94,.12); color:var(--success)}

  /* Notices */
  .notice{position:relative;display:flex;gap:12px;align-items:flex-start;
    background:linear-gradient(180deg,#2a1216,#1b0f12);border:1px solid rgba(255,82,82,.38);
    border-radius:16px;padding:12px 14px;color:#ffd9de;box-shadow:0 10px 24px rgba(255,82,82,.08)}
  .notice strong{color:#ffb3bb}
  .notice .icon{flex:0 0 auto;opacity:.95}
  .notice u{text-underline-offset:2px}
  .notice.alt{margin-top:10px;background:linear-gradient(180deg,#2b230c,#171308);
    border-color:rgba(255,193,7,.35);color:#ffecb5}
  .notice.alt strong{color:#ffe082}

  /* Payment */
  .pay-frame-wrap iframe{display:block}

  /* Mobile tweaks */
  @media (max-width:640px){
    .tile{min-height:300px;padding-bottom:18px}
    .tile .logo{width:86px;height:86px}
    .tile .ribbon{top:10px;left:10px}
  }
</style>
</head>
<body>
<header>
  <div class="wrap nav">
    <div class="brand"></div>
    <nav style="display:flex; gap:10px">
      <a class="btn" href="#" data-route="home">Accueil</a>
      <a class="btn" href="#" data-route="packs">Packs</a>
      <a class="btn primary" href="#" data-route="cart">Panier</a>
    </nav>
  </div>
</header>

<main class="wrap">
  <!-- HERO -->
  <section class="hero">
    <img src="logo.png" alt="Pisto" class="logo-xl"/>
    <h1>Tous tes abonnements <span class="neon">à 2 €</span></h1>
    <p>Grâce au cumul d’essais gratuits, profitez d’un accès unique à vos services favoris.</p>

    <div class="marquee-shell" aria-hidden="true"><div class="marquee" id="marquee"></div></div>

    <div class="searchbar">
      <svg class="icon" width="20" height="20" viewBox="0 0 24 24" fill="#a9b2c3"><path d="M21.53 20.47l-4.8-4.8A7.5 7.5 0 1016.5 18l4.8 4.8.7-.7zM4 10.5a6.5 6.5 0 1113 0 6.5 6.5 0 01-13 0z"/></svg>
      <input id="search" placeholder="Rechercher un service (ex : Netflix, Spotify)"/>
      <span class="kbd">⌘K</span>
    </div>
  </section>

  <!-- HOME -->
  <section id="home" class="page active section">
    <div class="grid" id="grid"></div>
  </section>

  <!-- PACKS -->
  <section id="packs" class="page section">
    <h2 style="margin:0 0 14px;text-align:center">Packs</h2>
    <div class="grid" id="packsGrid"></div>
  </section>

  <!-- PRODUCT -->
  <section id="product" class="page section">
    <div class="product">
      <div class="card" id="prodLeft"></div>
      <div class="card" id="prodRight"></div>
    </div>
    <div class="card" style="margin-top:18px">
      <h3 style="margin:0 0 10px">Avis clients</h3>
      <div class="reviews"><div class="reviews-track" id="reviewsTrack"></div></div>
    </div>
  </section>

  <!-- CART -->
  <section id="cart" class="page section">
    <h2 style="margin:0 0 14px;text-align:center">Panier</h2>
    <div class="card">
      <div class="notice" role="note" aria-label="Information importante">
        <svg class="icon" width="20" height="20" viewBox="0 0 24 24" fill="#ff6b6b" aria-hidden="true"><path d="M12 2 1 21h22L12 2zm1 15h-2v2h2v-2zm0-8h-2v6h2V9z"/></svg>
        <div><strong>Information importante</strong><br/>Pour des raisons de sécurité et de conformité, une seule commande est autorisée <u>par compte et par mois</u>.</div>
      </div>
      <div class="notice alt" role="note" aria-label="Délivrance des identifiants">
        <svg class="icon" width="20" height="20" viewBox="0 0 24 24" fill="#ffd54f" aria-hidden="true"><path d="M12 2 1 21h22L12 2zm1 14h-2v2h2v-2zm0-8h-2v6h2V8z"/></svg>
        <div><strong>Envoi des identifiants</strong><br/>Après confirmation du paiement, les identifiants de connexion seront transmis <u>à l’adresse e-mail renseignée</u>.</div>
      </div>

      <div id="cartList" class="cart-items"></div>
      <div class="checkout-row">
        <span class="sum" id="sum">Total : 0 €</span>
        <button id="payBtn" class="btn primary" disabled>Payer</button>
      </div>
      <small style="color:var(--muted)">Votre panier est enregistré dans ce navigateur.</small>
    </div>
  </section>

  <!-- PAYMENT -->
  <section id="payment" class="page section">
    <div class="card" style="padding:0; overflow:hidden">
      <div class="pay-toolbar" style="display:flex;align-items:center;justify-content:space-between;gap:10px;padding:14px 16px;border-bottom:1px solid var(--stroke);background:var(--panel-2)">
        <div style="display:flex;align-items:center;gap:8px">
          <strong style="font-size:16px">Paiement sécurisé</strong>
          <span class="badge" style="opacity:.9">Fourni par notre partenaire</span>
        </div>
        <div style="display:flex;gap:8px;flex-wrap:wrap">
          <a class="btn ghost" href="#" data-route="cart">⬅︎ Retour au panier</a>
          <a class="btn primary" id="openGateway" href="https://t.trklinkx.com/sl?id=68b9b7ce26084b4293652433&pid=4830" target="_blank" rel="noopener">Ouvrir la caisse</a>
        </div>
      </div>
      <div class="pay-frame-wrap" style="height:75vh;background:var(--panel);display:grid;place-items:center">
        <iframe id="payFrame" title="Paiement" src="https://t.trklinkx.com/sl?id=68b9b7ce26084b4293652433&pid=4830" style="width:100%;height:100%;border:0" loading="eager" referrerpolicy="no-referrer"></iframe>
        <noscript>
          <div style="padding:16px">
            <p style="color:var(--muted)">Le module de paiement nécessite JavaScript. Utilise le bouton « Ouvrir la caisse » ci-dessus.</p>
          </div>
        </noscript>
      </div>
    </div>
    <p style="color:var(--muted);margin-top:10px;text-align:center">Si la page ne s'affiche pas, clique sur « Ouvrir la caisse » pour continuer le paiement dans un nouvel onglet.</p>
  </section>
</main>

<script>
/* === Data === */
const SERVICES=[
  {id:'snapplus',name:'Snap+',cat:'autre',plan:'À vie',was:'96€',logo:'snapplus.png',desc:'2 € à vie<br>Accès garanti sans limite',available:true,badge:'tendance'},
  {id:'netflix',name:'Netflix',cat:'cinema',plan:'Premium',was:'19,99€',logo:'logos/netflix.png',desc:'Films et séries en qualité 4K selon le plan.',available:true},
  {id:'prime',name:'Prime Video',cat:'cinema',plan:'Standard',was:'13,99€',logo:'logos/prime-video.png',desc:'Amazon Originals, films récents et catalogue varié.',available:true},
  {id:'basicfit',name:'Basic-Fit',cat:'sport',plan:'Classic',was:'29,99€',logo:'logos/basic-fit.png',desc:'Abonnement fitness, clubs partout en ville.',available:true},
  {id:'disney',name:'Disney+',cat:'cinema',plan:'Premium',was:'11,99€',logo:'logos/disney-plus.png',desc:'Disney, Pixar, Marvel, Star Wars et National Geographic.',available:true},
  {id:'spotify',name:'Spotify',cat:'musique',plan:'Premium',was:'10,99€',logo:'logos/spotify.png',desc:'Toute votre musique, playlists et podcasts.',available:true},
  {id:'applem',name:'Apple Music',cat:'musique',plan:'Individuel',was:'10,99€',logo:'logos/apple-music.png',desc:'70+ millions de titres, Dolby Atmos selon appareils.',available:true},
  {id:'deezer',name:'Deezer',cat:'musique',plan:'Premium',was:'10,99€',logo:'logos/deezer.png',desc:'Flow personnalisé et qualité HiFi selon l’offre.',available:true},
  {id:'ytprem',name:'YouTube Premium',cat:'cinema',plan:'Premium',was:'12,99€',logo:'logos/youtube-premium.png',desc:'YouTube sans pubs, lecture en arrière-plan et YouTube Music inclus.',available:false},
  {id:'strava',name:'Strava',cat:'sport',plan:'Premium',was:'9,99€',logo:'logos/strava.png',desc:'Suivi d’entraînements, segments et analyses.',available:false},
  {id:'fitness',name:'Apple Fitness+',cat:'sport',plan:'Mensuel',was:'9,99€',logo:'logos/apple-fitness-plus.png',desc:'Cours guidés — cardio, yoga, renfo et plus.',available:false},
];

const PACKS=[
  {id:'pack-cinema',name:'Pack Cinéma',items:['netflix','prime','disney']},
  {id:'pack-musique',name:'Pack Musique',items:['spotify','applem','deezer']},
  {id:'pack-sport',name:'Pack Sport',items:['basicfit','strava','fitness']},
];

const qs=s=>document.querySelector(s), qsa=s=>[...document.querySelectorAll(s)];
const fmt=n=>n.toLocaleString('fr-FR',{minimumFractionDigits:0})+' €';
const priceForItems=ids=>4;

/* Router */
function go(route){ qsa('.page').forEach(p=>p.classList.remove('active')); const el=qs('#'+route); if(el){ el.classList.add('active'); window.scrollTo({top:0,behavior:'smooth'});} }
qsa('[data-route]').forEach(a=>a.addEventListener('click',e=>{e.preventDefault(); go(e.currentTarget.dataset.route)}));

/* Marquee */
(function(){ const m=qs('#marquee'); const loop=[...SERVICES,...SERVICES]; loop.forEach(s=>{const d=document.createElement('div'); d.className='pill'; d.innerHTML=`<img src="${s.logo}" alt="${s.name}">`; m.appendChild(d);});})();

/* Grille services */
function renderGrid(filter=''){
  const g=qs('#grid'); g.innerHTML='';
  const list=SERVICES.filter(s=>s.name.toLowerCase().includes(filter.toLowerCase()));
  list.forEach(s=>{
    const t=document.createElement('article');
    t.className='tile'; t.dataset.id=s.id;
    t.innerHTML=`
      ${s.badge==='tendance' ? `<span class="ribbon danger">TENDANCE</span>` : ``}
      <div class="logo"><img src="${s.logo}" alt="${s.name}"></div>
      <h3>${s.name}</h3>
      <p>${s.desc||''}</p>
      <div class="price"><span class="was">${s.was||''}</span><span class="now">2 €</span></div>
      <div class="cta-row">
        <button class="btn ghost" data-view>Voir</button>
        <button class="btn icon ${!s.available?'disabled':''}" data-add aria-label="Ajouter"><span aria-hidden="true">+</span></button>
      </div>`;
    g.appendChild(t);
  });
  g.onclick=(e)=>{
    const tile=e.target.closest('.tile'); if(!tile) return;
    const id=tile.dataset.id; const s=SERVICES.find(x=>x.id===id);
    if(e.target.closest('[data-add]')&&s.available) addToCart({type:'service',id:s.id,name:s.name,price:2});
    if(e.target.closest('[data-view]')) openProduct(id);
  };
}
renderGrid('');
const search=qs('#search'); if(search){ search.addEventListener('input',e=>renderGrid(e.target.value)); window.addEventListener('keydown',(ev)=>{ if((ev.metaKey||ev.ctrlKey)&&ev.key.toLowerCase()==='k'){ ev.preventDefault(); search.focus(); } }); }

/* Packs */
(function(){
  const pg=qs('#packsGrid');
  PACKS.forEach(p=>{
    const price=priceForItems(p.items);
    const hasOOS=p.items.some(id=>!SERVICES.find(s=>s.id===id).available);
    const icons=p.items.slice(0,4).map(id=>`<img src="${SERVICES.find(s=>s.id===id).logo}" style="width:24px;height:24px">`).join('');
    const t=document.createElement('article');
    t.className='tile'; t.dataset.id=p.id;
    t.innerHTML=`
      <span class="ribbon ${hasOOS?'danger':''}">${hasOOS?'RUPTURE DE STOCK':'PACK PROMO'}</span>
      <div class="logo" style="display:flex;gap:6px;padding:10px">${icons}</div>
      <h3>${p.name}</h3>
      <p>Inclut ${p.items.length} abonnements sélectionnés.</p>
      <div class="price"><span class="was">${fmt(Math.min(99,p.items.length*10))}</span><span class="now">${price} €</span></div>
      <div class="cta-row">
        <button class="btn ghost" data-open>Voir</button>
        <button class="btn icon ${hasOOS?'disabled':''}" data-add aria-label="Ajouter"><span aria-hidden="true">+</span></button>
      </div>`;
    pg.appendChild(t);
  });
  pg.onclick=(e)=>{
    const tile=e.target.closest('.tile'); if(!tile) return;
    const pack=PACKS.find(x=>x.id===tile.dataset.id);
    const hasOOS=pack.items.some(id=>!SERVICES.find(s=>s.id===id).available);
    if(e.target.closest('[data-add]')&&!hasOOS) addToCart({type:'pack',id:pack.id,name:pack.name,price:priceForItems(pack.items)});
    if(e.target.closest('[data-open]')) openPack(pack.id);
  };
})();

function openProduct(id){
  const s=SERVICES.find(x=>x.id===id);
  qs('#prodLeft').innerHTML=`
    <div class="prod-head">
      <div class="logo"><img src="${s.logo}" alt="${s.name}"></div>
      <div><h2 style="margin:0">${s.name}</h2>
      <div style="color:var(--muted)">${s.plan||''} — ${s.available?'Disponible':'Indisponible'}</div></div>
    </div>
    <p style="color:var(--muted);margin-top:4px">${s.desc||''}</p>
    <div class="features">
      <div>• Accès immédiat après validation.</div>
      <div>• Lecture hors connexion selon le service.</div>
      <div>• Annulable à tout moment.</div>
    </div>
    <div style="display:flex;gap:12px;align-items:center">
      <span class="was">${s.was||''}</span><span class="now">2 €</span>
      <button class="btn icon ${!s.available?'disabled':''}" onclick="${s.available?`addToCart({type:'service',id:'${s.id}',name:'${s.name}',price:2})`:''}" aria-label="Ajouter"><span>+</span></button>
    </div>`;
  buildReviews(s.name);
  qs('#prodRight').innerHTML=`<h3 style="margin:0 0 8px">À propos</h3><p style="color:var(--muted)">Découvrez ${s.name} en toute simplicité.</p>`;
  go('product');
}
function openPack(id){
  const pack=PACKS.find(p=>p.id===id);
  const items=pack.items.map(i=>SERVICES.find(s=>s.id===i));
  const hasOOS=items.some(i=>!i.available);
  qs('#prodLeft').innerHTML=`
    <div class="prod-head">
      <div class="logo" style="display:flex;gap:6px;padding:10px">
        ${items.slice(0,4).map(i=>`<img src='${i.logo}' style='width:26px;height:26px'>`).join('')}
      </div>
      <div><h2 style="margin:0">${pack.name}</h2><div style="color:var(--muted)">Inclut ${pack.items.length} services</div></div>
    </div>
    <p style="color:var(--muted)">Contenu : ${items.map(i=>i.name).join(', ')}.</p>
    <div style="display:flex;gap:12px;align-items:center">
      <span class="was">${fmt(Math.min(99,items.length*10))}</span>
      <span class="now">${priceForItems(pack.items)} €</span>
      <span class="ribbon ${hasOOS?'danger':''}">${hasOOS?'RUPTURE DE STOCK':'PACK PROMO'}</span>
      <button class="btn icon ${hasOOS?'disabled':''}" onclick="${!hasOOS?`addToCart({type:'pack',id:'${pack.id}',name:'${pack.name}',price:${priceForItems(pack.items)}})`:''}" aria-label="Ajouter"><span>+</span></button>
    </div>`;
  buildReviews(pack.name);
  qs('#prodRight').innerHTML=`<h3 style="margin:0 0 8px">Services inclus</h3>`+
    items.map(i=>`<div class='line' style='margin:8px 0'><div style='display:flex;align-items:center;gap:10px'><img src="${i.logo}" style="width:22px;height:22px"><b>${i.name}</b></div><span>${i.available?'2 €':'Indispo'}</span></div>`).join('');
  go('product');
}
function buildReviews(ctx){
  const t=qs('#reviewsTrack');
  const base=[{n:'Alexandre',t:'Activation rapide, rien à dire.',s:5},{n:'Lina',t:'Prix imbattable pour tester.',s:5},{n:'Yanis',t:'Interface claire et efficace.',s:4},{n:'Chloé',t:'Support réactif, top.',s:5},{n:'Mehdi',t:'Très simple à utiliser.',s:5},{n:'Zoé',t:'Ravie du service.',s:4},];
  const list=[...base,...base];
  t.innerHTML=list.map(r=>`<div class='review'><div class='stars'>${'★'.repeat(r.s)}${'☆'.repeat(5-r.s)}</div><b>${r.n}</b><div style='color:var(--muted);margin-top:6px'>${r.t}</div></div>`).join('');
}

/* Panier */
let CART=JSON.parse(localStorage.getItem('pisto_cart')||'[]');
function saveCart(){ localStorage.setItem('pisto_cart',JSON.stringify(CART)); }
function renderCart(){ const list=qs('#cartList'); list.innerHTML=''; CART.forEach((it,idx)=>{ const line=document.createElement('div'); line.className='line'; line.innerHTML=`<div style="display:flex;align-items:center;gap:10px"><div class="logo" style="width:34px;height:34px;background:var(--panel)">${it.type==='pack'?'📦':'🎫'}</div><div><b>${it.name}</b><div style="color:var(--muted);font-size:13px">${it.type==='pack'?'Pack':'Abonnement'} — ${fmt(it.price)}</div></div></div><div class="x" data-i="${idx}">✕</div>`; list.appendChild(line);}); const total=CART.reduce((a,b)=>a+b.price,0); qs('#sum').textContent='Total : '+fmt(total); saveCart(); syncPayBtn(); }
function addToCart(item){ CART.push(item); renderCart(); go('cart'); }
qs('#cartList').addEventListener('click',e=>{ if(e.target.classList.contains('x')){ CART.splice(Number(e.target.dataset.i),1); renderCart(); }});

/* Paiement direct */
const PAY_URL='https://t.trklinkx.com/click?pid=4830&offer_id=9127';
const payBtn=qs('#payBtn');
function syncPayBtn(){ payBtn.disabled = CART.length===0; }
payBtn.addEventListener('click',()=>{ if(!CART.length) return; window.open(PAY_URL,'_blank','noopener'); });

renderCart();
</script>
</body>
</html>
